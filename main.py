#include json library
from email.policy import strict
import json
import string
from typing import Optional
from fastapi import FastAPI
from fastapi import Depends

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


junior_card_data = json.loads('''{ "reason": { "id": 0, "acc_id": "I/200909/1/2718", "iban": "KZ558562204109177398", "currency": "KZT", "product_code": "0.300.1500.15", "note": "Junior Card Instant", "design": "", "card_type": "debit", "color_text": "", "has_applepay": false, "virtual": false, "card_group": "GROUP_5", "type": "Visa Instant Reward Jun", "paysys": "VISA", "pan": "489993******4340", "holder": "AMINA MUSTAPA", "holder_name": "evenninetwoone ??onezeroforse", "birth_date": "17.09.2007", "expire_date": "30.09.2023", "card_status": "00", "branch": "Отделение №2502", "allow_dr": true, "allow_cr": true, "available": 77777.99, "clear": 1352.57, "booking": 1352.57, "hold": 0, "cashback": { "id": 4221145, "iban": "KZ558562277777777777", "currency": "KZT", "transfer_limit": 500, "transfer_amount": 1000, "transfer_diff": 0, "transfer_reach": true, "month_limit": 100, "month_amount": 10, "month_diff": 100, "month_reach": false, "category_chosed": true, "category_count": 4 } }, "success": true }''')
get_selected_cashback_categories_test_data = json.loads('''{"success": true,"reason": {"blocks": [{"groups": [{"title": "Гарантированный кэшбэк","categories": [{"id": 0,"image_url": "/cashback/category/BASE.png","title": "Гарантированный кэшбэк","selected": true,"readonly": true,"description": "Устанавливается автоматически на покупки, кроме выбранных любимых категорий с повышенным кэшбэком","percent": "1%"}],"description": ""},{"title": "Январь","categories": [{"id": 3600,"image_url": "/cashback/category/BASE.png","title": "Развлечения","selected": true,"readonly": true,"description": "","percent": "10%"},{"id": 3900,"image_url": "/cashback/category/BASE.png","title": "Одежда, обувь и аксессуары","selected": true,"readonly": true,"description": "","percent": "5%"}],"description": "Вы уже выбрали категории покупок с повышенным кэшбэком. Новые предложения будут доступны в следующем месяце"}]}]}}''')
money_request_list_data = json.loads('''{"success": true,"reason": {"money_request_list": []}}''')
pay_service_service = json.loads('''{"success": true,"services": [{"code": "PHONE","description": "Мобильная связь","direct_online": false,"is_parent": false,"logo_img": "PHONE.png","is_regular": true},{"code": "TRANSPORT","description": "Транспорт, Билеты","direct_online": false,"is_parent": false,"logo_img": "TRANSPORT.png","is_regular": true},{"code": "GAMES","description": "Игры","direct_online": false,"is_parent": false,"logo_img": "GAMES.png","is_regular": true}]}''')
pay_service_transport = json.loads('''{"success": true,"navigation": [{"code": "TRANSPORT","description": "Транспорт, Билеты"}],"services": [{"code": "OBCH_TR","description": "Общественный транспорт","direct_online": false,"is_parent": false,"logo_img": "TRANSPORT.png","is_regular": true}]}''')
pay_service_obch_transport = json.loads('''{"success": true,"navigation": [{"code": "TRANSPORT","description": "Транспорт, Билеты"},{"code": "OBCH_TR","description": "Общественный транспорт"}],"services": [{"code": "ONAI_ALL","description": "ОНАЙ","direct_online": false,"is_parent": false,"logo_img": "ONAI_ALL.png","is_regular": true}]}''')
faq = json.loads('''{"success": true,"reason": {"title": "","questions": [{"id": 82,"title": "Что такое Junior Bank?","answer": "Junior Bank  это мобильное приложение, которое отражает карту ребенка, доступные на ней средства, историю покупок и заработанный кэшбэк."},{"id": 83,"title": "Что такое Junior Card?","answer": "Это виртуальная карта для оплаты покупок смартфоном, с помощью Apple Pay, Samsung Pay. Карту можно открыть детям от 6 до 18 лет."},{"id": 84,"title": "Кто может выпустить карту Junior?","answer": "Карту Junior может выпустить клиент BCC.KZ, у которого уже имеется в наличии любая карта БЦК. Для своих детей, племянников, внуков, братьев и сестер. То есть, бабушка может выпустить карту внуку, дядя племяннику, сестра младшему брату и т.д."},{"id": 85,"title": "Как родитель может управлять картой ребенка?","answer": "- видеть карту ребенка в приложении bcc.kz и операции, произведенные по карте Junior.\nзаблокировать/разблокировать карту ребенка\n- настроить ежедневные лимиты трат по следующим направлениям в сторону увеличения или уменьшения, снятие наличных в банкоматах, переводы с детских карт на другие карты, оплата покупок\n-установить/сменить ПИН-код\nРодитель не может: \n- платить с детской карты,\n- снимать деньги с детской карты, \n- переводить деньги с детской карты обратно на свою карту."},{"id": 86,"title": "Ограничения Junior Card","answer": "По детским картам настроен ряд автозапретов в рамках которых детская карта не сможет обслуживаться в торговых точках категории 18+ (табачная лавка, алкомаркеты, религиозные магазины, казино, коммерческий спорт, аренда авто и прочее)"},{"id": 87,"title": " Условия по кэшбэку","answer": "При совершении покупок по карте Junior на нее начисляется гарантированный кэшбэк в размере 1%. Кэшбэк начисляется на любую сумму покупки, даже на 10 тенге, максимальная сумма кэшбэка в месяц 10 000 тенге."}]}}''',strict = False)
divisions = json.loads('''{"success": true,"on": [{"id": 1389,"name": "Алматы"}],"off": [{"id": 1397,"name": "Актау"},{"id": 1399,"name": "Актобе"},{"id": 1396,"name": "Атырау"},{"id": 1402,"name": "Жезказган"},{"id": 1439,"name": "Караганда"},{"id": 1441,"name": "Кокшетау"},{"id": 1440,"name": "Костанай"},{"id": 1437,"name": "Кызылорда"},{"id": 1411,"name": "Нур-Султан"},{"id": 1405,"name": "Павлодар"},{"id": 1408,"name": "Петропавловск"},{"id": 1401,"name": "Семей"},{"id": 1394,"name": "Талдыкорган"},{"id": 1393,"name": "Тараз"},{"id": 7840,"name": "Туркестан"},{"id": 1400,"name": "Уральск"},{"id": 1398,"name": "Усть-Каменогорск"},{"id": 1407,"name": "Шымкент"}]}''')
lang = json.loads('''{"success":true,"reason":"Язык изменен"}''')
onai = json.loads('''{"success":true,"navigation":[{"code":"TRANSPORT","description":"Транспорт, Билеты"},{"code":"OBCH_TR","description":"Общественный транспорт"},{"code":"ONAI_ALL","description":"ОНАЙ"}],"services":[{"code":"OPL_CARD","description":"Единая транспортная карта ","direct_online":false,"is_parent":false,"service_provider":"ОНАЙ","logo_img":"OPL_CARD.png","is_regular":true},{"code":"T_PROEZ","description":"Транспортный проездной","direct_online":false,"is_parent":false,"service_provider":"ОНАЙ","logo_img":"T_PROEZ.png","is_regular":true}]}''')
opl_card = json.loads('''{ "success": true, "navigation": [ { "code": "TRANSPORT", "description": "Транспорт, Билеты" }, { "code": "OBCH_TR", "description": "Общественный транспорт" }, { "code": "ONAI_ALL", "description": "ОНАЙ" }, { "code": "OPL_CARD", "description": "Единая транспортная карта " } ], "parameters": [ { "parameter": "CARD2", "description": "Номер карты", "value": "", "min_size": 1, "max_size": 20, "mask": "", "note": "", "type": "", "parameter_type": "BARCODE", "regexp_clause": "" } ], "operationType": "PAYMENT", "service": "OPL_CARD", "check_type": 6, "notify": false, "service_description": "Единая транспортная карта ", "service_provider": "ОНАЙ", "logo_img": "OPL_CARD.png", "transport_type": "ONAY" }''')
games = json.loads('''{ "success": true, "navigation": [ { "code": "GAMES", "description": "Игры" } ], "services": [ { "code": "ONLINE_PLAY", "description": "Онлайн игры", "direct_online": false, "is_parent": false, "logo_img": "GAMES.png", "is_regular": true } ] }''')
online_play = json.loads('''{ "success": true, "navigation": [ { "code": "GAMES", "description": "Игры" }, { "code": "ONLINE_PLAY", "description": "Онлайн игры" } ], "services": [ { "code": "TANK_ONL", "description": "Танки Онлайн", "direct_online": false, "is_parent": false, "service_provider": "Онлайн игры", "logo_img": "TANK_ONL.png", "is_regular": true }, { "code": "STEAM_IGRY", "description": "Steam", "direct_online": false, "is_parent": false, "service_provider": "Steam", "logo_img": "STEAM_IGRY.png", "is_regular": true } ] }''')
card_limit = json.loads('''{ "card_limit": [ { "limit_type": "INET_TR", "limit_group": "JUNIOR", "description": "Оплата в интернете", "currency": "USD", "fromdate": "", "todate": "", "amount": 35, "amount_base": 35, "amount_now": 0, "amount_rest": 35, "amount_max": 11400 }, { "limit_type": "ATM", "limit_group": "JUNIOR", "description": "Снятие наличных через ATM", "currency": "USD", "fromdate": "", "todate": "", "amount": 35, "amount_base": 35, "amount_now": 0, "amount_rest": 35, "amount_max": 10000 }, { "limit_type": "POS", "limit_group": "JUNIOR", "description": "Оплата в местах торговли", "currency": "USD", "fromdate": "24.10.2021 00:00", "todate": "24.04.2022 16:00", "amount": 40, "amount_base": 35, "amount_now": 0, "amount_rest": 40, "amount_max": 10000 }, { "limit_type": "P2P", "limit_group": "JUNIOR", "description": "P2P переводы", "currency": "USD", "fromdate": "", "todate": "", "amount": 35, "amount_base": 35, "amount_now": 0, "amount_rest": 35, "amount_max": 10000 } ], "success": true }''')
cashback_faq = json.loads('''{ "success": true, "reason": { "title": "О кэшбэке", "questions": [ { "id": 112, "title": "Что такое кэшбэк?", "answer": "Это возвращение части денег при оплате покупок. Кэшбэк будет начислен в течение 3-х дней после покупки на отдельный кэшбэк счет. Если ты отменил покупку и оформил возврат — кэшбэк начислен не будет." }, { "id": 113, "title": "Что такое «Мои категории»?", "answer": "Первого числа каждого месяца открывается доступ к выбору 2-х категорий с повышенным кэшбэком. «Мои категории» нельзя изменить и выбираются один раз в каждый новый месяц." }, { "id": 114, "title": "Сколько я получаю кэшбэка с каждой покупки?", "answer": "По всем покупкам идет гарантированный кэшбэк 1%. При оплате некоторых покупок можно получить до 10% кэшбэка, если ты выберешь категории с повышенным кэшбэком на месяц. А так же кэшбэк от наших партнеров до 30%." }, { "id": 117, "title": "Какой минимальный кэшбэк в месяц?", "answer": "Чтобы кэшбэк за месяц не сгорел, следует накопить 100 тенге и выше, которые автоматически переведутся в общий баланс кэшбэка." }, { "id": 118, "title": "Какой максимальный кэшбэк в месяц?", "answer": "В месяц можно получить до 10 000 тенге кэшбэка, свыше этой суммы кэшбэк не накопится." }, { "id": 119, "title": "Я получу кэшбэк за покупку за границей?", "answer": "Да, ты можешь расплачиваться картой по всему миру и получать кэшбэк за оплату покупок." }, { "id": 120, "title": "Куда начисляется кэшбэк?", "answer": "У кэшбэка свой счет, на котором копится общая сумма. Чтобы воспользоваться кэшбэком тебе самостоятельно нужно перевести его на свою карту. Перевод на карту доступен после того, как ты накопишь не менее 500 тенге." }, { "id": 121, "title": "Когда начисляется кэшбэк?", "answer": "В течение 3-х дней кэшбэк начисляется на счет по текущему месяцу." }, { "id": 122, "title": "Когда я смогу вывести накопленный кэшбэк на карту?", "answer": "Для перевода кэшбэка на свою карту накопите минимум 500 тенге в «Общем кэшбэке»." }, { "id": 123, "title": "Сгорает ли кэшбэк?", "answer": "Кэшбэк за месяц сгорает в конце месяца, если будет накоплено меньше 100 тенге. Общий кэшбэк сгорает через год, с момента начисления кэшбэка, если не перевести его на карту." }, { "id": 124, "title": "Если я возвращаю товар в магазин или отказываюсь от услуг, оплаченной картой, как это отразится на моей карте?", "answer": "В случае возврата покупки по #juniorcard ранее начисленный кэшбэк будет списан с Кэшбэк-счёта автоматически." }, { "id": 125, "title": "В каких случаях не начисляется кэшбэк?", "answer": "Кэшбэк не начисляется при снятии наличных денег, денежных переводах, платежах мобильной связи и транспорта (онай, kokshe bus tolem, astana LRT), азартных игр." }, { "id": 126, "title": "Я перевыпустил карту, что произойдёт с моим кэшбэком?", "answer": "Кэшбэк начисляется на отдельный Кэшбэк-счёт, поэтому ваши накопления сохранятся." }, { "id": 127, "title": "Что делать, если после списания суммы покупки мне не был начислен кэшбэк?", "answer": "Убедитесь, что торговая точка, где была совершена покупка, входит в список категорий по которым начисляется кэшбэк. Или позвоните нам по телефону 505." } ] } }''')
division_list = json.loads('''{ "success": true, "reason": { "divisions": [ { "pdivision": 1397, "description": "Актау", "latitude": 43.660333, "longitude": 51.150535, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1399, "description": "Актобе", "latitude": 50.288626, "longitude": 57.166393, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1389, "description": "Алматы", "latitude": 43.250407, "longitude": 76.909119, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1396, "description": "Атырау", "latitude": 47.109967, "longitude": 51.923615, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1402, "description": "Жезказган", "latitude": 47.802526, "longitude": 67.71544, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1439, "description": "Караганда", "latitude": 49.80695, "longitude": 73.084128, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1441, "description": "Кокшетау", "latitude": 53.287, "longitude": 69.406343, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1440, "description": "Костанай", "latitude": 53.212914, "longitude": 63.638472, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1437, "description": "Кызылорда", "latitude": 44.845787, "longitude": 65.503723, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1411, "description": "Нур-Султан", "latitude": 51.156625, "longitude": 71.434119, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1405, "description": "Павлодар", "latitude": 52.280959, "longitude": 76.940582, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1408, "description": "Петропавловск", "latitude": 54.867242, "longitude": 69.132047, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1401, "description": "Семей", "latitude": 50.411492, "longitude": 80.255953, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1394, "description": "Талдыкорган", "latitude": 45.008221, "longitude": 78.388885, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1393, "description": "Тараз", "latitude": 42.89759, "longitude": 71.357703, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 7840, "description": "Туркестан", "latitude": null, "longitude": null, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1400, "description": "Уральск", "latitude": 51.205902, "longitude": 51.382756, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1398, "description": "Усть-Каменогорск", "latitude": 49.946042, "longitude": 82.6315, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true }, { "pdivision": 1407, "description": "Шымкент", "latitude": 42.326729, "longitude": 69.596329, "worktime": "Пн-Пт с 09:00 до 18:00", "working": true } ] } }''')
card_block = json.loads('''{ "success": true, "reason": "Карта успешно заблокирована. Изменения вступят в силу через несколько минут" }''')
payments = json.loads('''{"success":true,"has_invoice":false,"templates":[]}''')
t_proez = json.loads('''{ "success": true, "navigation": [ { "code": "TRANSPORT", "description": "Транспорт, Билеты" }, { "code": "OBCH_TR", "description": "Общественный транспорт" }, { "code": "ONAI_ALL", "description": "ОНАЙ" }, { "code": "T_PROEZ", "description": "Транспортный проездной" } ], "parameters": [ { "parameter": "CARD2", "description": "Номер карты", "value": "", "min_size": 1, "max_size": 20, "mask": "", "note": "", "type": "", "parameter_type": "BARCODE", "regexp_clause": "" } ], "operationType": "PAYMENT", "service": "T_PROEZ", "check_type": 6, "notify": false, "service_description": "Транспортный проездной", "service_provider": "ОНАЙ", "logo_img": "T_PROEZ.png" }''')
tank_onl = json.loads('''{ "operationType" : "PAYMENT", "service" : "TANK_ONL", "check_type" : 1, "notify" : false, "service_description" : "Танки Онлайн", "service_provider" : "Онлайн игры", "success" : true, "navigation" : [ { "description" : "Игры", "code" : "GAMES" }, { "description" : "Онлайн игры", "code" : "ONLINE_PLAY" }, { "description" : "Танки Онлайн", "code" : "TANK_ONL" } ], "logo_img" : "TANK_ONL.png", "parameters" : [ { "regexp_clause" : "", "parameter" : "IDIGR", "note" : "", "parameter_type" : "text", "mask" : "", "value" : "", "description" : "ID игрока", "max_size" : 20, "min_size" : 1, "type" : "NO" } ] }''')
steam_igry = json.loads('''{ "operationType" : "PAYMENT", "service" : "STEAM_IGRY", "check_type" : 1, "notify" : false, "service_description" : "Steam", "service_provider" : "Steam", "success" : true, "navigation" : [ { "description" : "Игры", "code" : "GAMES" }, { "description" : "Онлайн игры", "code" : "ONLINE_PLAY" }, { "description" : "Steam", "code" : "STEAM_IGRY" } ], "logo_img" : "STEAM_IGRY.png", "parameters" : [ { "regexp_clause" : "", "parameter" : "LGNOP", "note" : "", "parameter_type" : "text", "mask" : "", "value" : "", "description" : "Логин", "max_size" : 50, "min_size" : 1, "type" : "NO" } ] }''')

partner_info = json.loads(r'{ "success" : true, "reason" : { "partners" : [ { "id" : 2740, "category" : "Детские товары", "cashback" : "3 %", "installment" : "", "addresses" : [ { "address" : "г. Алматы, пр. Абылайхана, 103, 3 этаж, 321 бутик " } ], "socials" : [ { "link" : "akonya_toyshop", "logo" : "", "name" : "instagram" } ], "logo" : "\/partners\/default.png", "worktimes" : [ { "time" : "Пн-Вс 10:00 - 20:00" } ], "contacts" : [ { "logo" : "", "value" : "+7(776) 223 29 16, +7(701) 223 29 16", "type" : "phone", "link" : "" } ], "site" : "", "info" : "Наша игрушка - лучший подарок. Детские игрушки в широком ассортименте.\n", "name" : "Аконя" }, { "id" : 2835, "category" : "Кафе и рестораны", "cashback" : "3 %", "installment" : "", "addresses" : [ { "address" : "г. Алматы, мкр. Самал-3, 1" } ], "socials" : [ { "link" : "buqa_burger", "logo" : "", "name" : "instagram" } ], "logo" : "\/partners\/buqa.png", "worktimes" : [ { "time" : "Пн-Вс 10:00-02:00" } ], "contacts" : [ { "logo" : "", "value" : "8 776 230 50 04", "type" : "phone", "link" : "" } ], "site" : "", "info" : "Новый формат быстрого качественного питания. Самые сочные бургеры. Позитивная атмосфера.", "name" : "BUQA" }, { "id" : 2796, "category" : "Кафе и рестораны", "cashback" : "3 %", "installment" : "", "addresses" : [ { "address" : "г. Алматы, ул. Айманова, 155" } ], "socials" : [ ], "logo" : "\/partners\/default.png", "worktimes" : [ { "time" : "Пн-Вс 08.00-21.00" } ], "contacts" : [ { "logo" : "", "value" : "2750333", "type" : "phone", "link" : "" } ], "site" : "", "info" : "В нашей кулинарий вы сможете вкусно позавтракать, пообедать и хорошо провести время.", "name" : "Кулинария на Дархане" }, { "id" : 2781, "category" : "Одежда и обувь", "cashback" : "3 %", "installment" : "", "addresses" : [ { "address" : "мкр. Аксай 5 дом 25 бутик В37" } ], "socials" : [ { "link" : "@karapuzy_almaty.kz", "logo" : "", "name" : "instagram" } ], "logo" : "\/partners\/default.png", "worktimes" : [ { "time" : "Пн-Вс 10:00 до 20:00" } ], "contacts" : [ { "logo" : "", "value" : "+7 707 715 65 26", "type" : "phone", "link" : "" } ], "site" : "", "info" : "Качественная детская дежда производство Россия, Турция и Китай до 7 лет, опыт работы в данном сегменте с 2008 года. Форма оплаты наличными, POS терминал, система \"Быстрая выручка\" АО БанкЦентрКредит", "name" : "Магазин Карапузы" } ] } }')

@app.get("/mb/!pkg_w_mb_main.operation")
def read_root(action: Optional[str] = "",service_code: Optional[str] = "",LANG: Optional[str] = "ru",type: Optional[str]="PAYMENTS", account_id: Optional[str]=""):
    if(action == "JUNIOR_CARD"):
        return junior_card_data
    if(action == "GET_SELECTED_CASHBACK_CATEGORIES_TEST"):
        return get_selected_cashback_categories_test_data
    if(action == "JUNIOR_MONEY_REQUEST_LIST"):
        return money_request_list_data
    if(action == "JUNIOR_FAQ"):
        return faq
    if(action == "GET_TEMPLATE_LIST_NEW"):
        return payments
    if(action == "GET_PAY_SERVICE" and service_code == "SERVICE"):
        return pay_service_service
    if(action == "GET_PAY_SERVICE" and service_code == "TRANSPORT"):
        return pay_service_transport
    if(action == "GET_PAY_SERVICE" and service_code == "OBCH_TR"):
        return pay_service_obch_transport
    if(action == "GET_DIVISIONS"):
        return divisions
    if(action == "SET_LANG" and lang == "ru"):
        return lang
    if(action == "GET_PAY_SERVICE" and service_code == "ONAI_ALL"):
        return onai
    if(action == "GET_PAY_SERVICE" and service_code == "OPL_CARD"):
        return opl_card
    if(action == "GET_PAY_SERVICE" and service_code == "GAMES"):
        return games
    if(action == "GET_PAY_SERVICE" and service_code == "ONLINE_PLAY"):
        return online_play
    if(action == "GET_PAY_SERVICE" and service_code == "T_PROEZ"):
        return t_proez
    if(action == "GET_CARD_LIMIT" and account_id == "0"):
        return card_limit
    if(action == "GET_DIVISION_LIST"):
        return division_list
    if(action == "JUNIOR_CASHBACK_FAQ"):
        return cashback_faq
    if(action == "GET_PARTNER_INFO"):
        return partner_info
    if(action == "GET_PAY_SERVICE" and service_code == "TANK_ONL"):
        return tank_onl
    if(action == "GET_PAY_SERVICE" and service_code == "STEAM_IGRY"):
        return steam_igry
    

